<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagrama de Classes - Sistema ERP M√≥dulo de Compras</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-style: italic;
        }
        .diagram-container {
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .info-box {
            background-color: #e8f4f8;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 20px 0;
        }
        .legend {
            margin-top: 30px;
            padding: 20px;
            background-color: #fafafa;
            border-radius: 5px;
        }
        .legend h3 {
            color: #333;
            margin-top: 0;
        }
        .legend-item {
            margin: 10px 0;
            display: flex;
            align-items: center;
        }
        .legend-symbol {
            font-weight: bold;
            margin-right: 10px;
            font-family: monospace;
            color: #2196F3;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        @media print {
            body {
                background-color: white;
            }
            .container {
                box-shadow: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Diagrama de Classes</h1>
        <div class="subtitle">Sistema ERP - M√≥dulo de Compras</div>
        
        <div class="info-box">
            <strong>Projeto Final - Programa√ß√£o Orientada a Objetos</strong><br>
            Este diagrama representa a arquitetura completa do Sistema de Gerenciamento de Compras,
            desenvolvido em C++17 aplicando os conceitos fundamentais de POO: Encapsulamento, Heran√ßa,
            Polimorfismo e Abstra√ß√£o.
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number">15</div>
                <div class="stat-label">Classes</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">4</div>
                <div class="stat-label">Interfaces</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">3</div>
                <div class="stat-label">Padr√µes de Projeto</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">16</div>
                <div class="stat-label">Funcionalidades</div>
            </div>
        </div>

        <div class="diagram-container">
            <div class="mermaid">
classDiagram
    %% Classes Base e de Dom√≠nio
    class Pessoa {
        <<abstract>>
        #string nome
        #string endereco
        #int id
        +Pessoa(string, string)
        +virtual ~Pessoa()
        +getId() int
        +getNome() string
        +getEndereco() string
        +virtual exibirDetalhes() void*
    }

    class Fornecedor {
        -string cnpj
        -string produto
        -double precoProduto
        +Fornecedor(string, string, string, string, double)
        +getCNPJ() string
        +getProduto() string
        +getPrecoProduto() double
        +setPrecoProduto(double) void
        +exibirDetalhes() void
        -validarCNPJ(string) bool
    }

    class OrdemCompra {
        -int id
        -string item
        -int quantidade
        -double valorUnitario
        -Fornecedor* fornecedor
        -StatusOrdem status
        -string dataEmissao
        +OrdemCompra(string, int, double, Fornecedor*)
        +getId() int
        +getItem() string
        +getQuantidade() int
        +getValorUnitario() double
        +getValorTotal() double
        +getFornecedor() Fornecedor*
        +getStatus() StatusOrdem
        +setStatus(StatusOrdem) void
        +getDataEmissao() string
    }

    class StatusOrdem {
        <<enumeration>>
        PENDENTE
        APROVADO
        REJEITADO
    }

    %% Interfaces
    class IExibivel {
        <<interface>>
        +exibir() void*
    }

    class IEstoque {
        <<interface>>
        +registrarEntradaCompra(int, int, int) bool*
        +consultarItem(int) int*
        +listarTodosItens() vector~string~*
        +verificarDisponibilidade(int, int) bool*
        +reservarMaterial(int, int) bool*
    }

    class IProducao {
        <<interface>>
        +notificarMaterialComprado(int) void*
        +receberPedidoMaterial(int, int, int) bool*
        +atualizarPrevisaoEntrega(int, string) void*
        +listarPedidosPendentes() vector~string~*
    }

    class IFinanceiro {
        <<interface>>
        +verificarDisponibilidade(double) bool*
        +autorizarPagamento(int) bool*
        +registrarContaPagar(int, double, string, string) bool*
        +listarContasPagar() vector~string~*
    }

    %% Classes Mock de Integra√ß√£o
    class EstoqueMock {
        -map~int,ItemEstoque~ itens
        +registrarEntradaCompra(int, int, int) bool
        +consultarItem(int) int
        +listarTodosItens() vector~string~
        +verificarDisponibilidade(int, int) bool
        +reservarMaterial(int, int) bool
    }

    class ProducaoMock {
        -vector~PedidoMaterial~ pedidos
        +notificarMaterialComprado(int) void
        +receberPedidoMaterial(int, int, int) bool
        +atualizarPrevisaoEntrega(int, string) void
        +listarPedidosPendentes() vector~string~
    }

    class FinanceiroMock {
        -double saldoDisponivel
        -map~int,ContaPagar~ contasPagar
        +verificarDisponibilidade(double) bool
        +autorizarPagamento(int) bool
        +registrarContaPagar(int, double, string, string) bool
        +listarContasPagar() vector~string~
        +consultarSaldo() double
    }

    %% Classes de Gerenciamento
    class ListaGenerica~T~ {
        <<template>>
        -vector~T*~ elementos
        +adicionar(T*) void
        +remover(int) bool
        +buscar(int) T*
        +listar() vector~T*~
        +ordenar(function) void
        +getTamanho() int
    }

    class GerenciadorFornecedores {
        -ListaGenerica~Fornecedor~ fornecedores
        -int proximoId
        +adicionar(Fornecedor*) void
        +listar() vector~Fornecedor*~
        +buscarPorId(int) Fornecedor*
        +buscarPorProduto(string) vector~Fornecedor*~
        +ordenarPorPreco() void
        +remover(int) bool
        +carregarDados(vector~Fornecedor*~) void
    }

    class GerenciadorOrdens {
        -ListaGenerica~OrdemCompra~ ordens
        -int proximoId
        -unique_ptr~IFinanceiro~ modulo_financeiro
        -unique_ptr~IProducao~ modulo_producao
        -unique_ptr~IEstoque~ modulo_estoque
        -mutex mtx
        +criar(OrdemCompra*) bool
        +listar() vector~OrdemCompra*~
        +buscarPorId(int) OrdemCompra*
        +exibirEstatisticas() void
        +carregarDados(vector~OrdemCompra*~) void
        +getModuloEstoque() IEstoque*
        +getModuloProducao() IProducao*
        +getModuloFinanceiro() IFinanceiro*
    }

    class ModuloCompras {
        -GerenciadorFornecedores gerenciadorFornecedores
        -GerenciadorOrdens gerenciadorOrdens
        -PersistenciaCompras persistencia
        +ModuloCompras()
        +adicionarFornecedor(Fornecedor*) void
        +listarFornecedores() vector~Fornecedor*~
        +buscarFornecedor(int) Fornecedor*
        +buscarFornecedoresPorProduto(string) vector~Fornecedor*~
        +ordenarFornecedoresPorPreco() void
        +criarOrdemCompra(OrdemCompra*) bool
        +listarOrdensCompra() vector~OrdemCompra*~
        +buscarOrdemCompra(int) OrdemCompra*
        +exibirEstatisticas() void
        +salvarDados() void
        +consultarEstoque(int) int
        +listarTodosItensEstoque() vector~string~
        +reservarMaterial(int, int) bool
        +criarPedidoMaterial(int, int, int) bool
        +listarPedidosProducaoPendentes() vector~string~
        +listarContasPagar() vector~string~
        +consultarSaldoFinanceiro() double
    }

    class PersistenciaCompras {
        -string arquivoFornecedores
        -string arquivoOrdens
        +PersistenciaCompras()
        +salvar(vector~Fornecedor*~, vector~OrdemCompra*~) bool
        +carregarFornecedores() vector~Fornecedor*~
        +carregarOrdens(vector~Fornecedor*~) vector~OrdemCompra*~
    }

    class ComprasException {
        -string mensagem
        +ComprasException(string)
        +what() char*
    }

    %% Relacionamentos de Heran√ßa
    Pessoa <|-- Fornecedor
    IExibivel <|.. Fornecedor
    IExibivel <|.. OrdemCompra
    IEstoque <|.. EstoqueMock
    IProducao <|.. ProducaoMock
    IFinanceiro <|.. FinanceiroMock
    exception <|-- ComprasException

    %% Relacionamentos de Composi√ß√£o e Agrega√ß√£o
    OrdemCompra o-- Fornecedor : refer√™ncia
    OrdemCompra *-- StatusOrdem : enum
    
    GerenciadorFornecedores *-- ListaGenerica~Fornecedor~ : cont√©m
    GerenciadorOrdens *-- ListaGenerica~OrdemCompra~ : cont√©m
    GerenciadorOrdens o-- IFinanceiro : usa
    GerenciadorOrdens o-- IProducao : usa
    GerenciadorOrdens o-- IEstoque : usa
    
    ModuloCompras *-- GerenciadorFornecedores : possui
    ModuloCompras *-- GerenciadorOrdens : possui
    ModuloCompras *-- PersistenciaCompras : possui
    
    PersistenciaCompras ..> Fornecedor : persiste
    PersistenciaCompras ..> OrdemCompra : persiste
            </div>
        </div>

        <div class="legend">
            <h3>üìñ Legenda de Relacionamentos</h3>
            <div class="legend-item">
                <span class="legend-symbol">‚îÄ‚îÄ‚ñ∂</span>
                <span><strong>Heran√ßa (Generaliza√ß√£o):</strong> Classe derivada herda de classe base</span>
            </div>
            <div class="legend-item">
                <span class="legend-symbol">- - ‚ñ∂</span>
                <span><strong>Implementa√ß√£o:</strong> Classe implementa interface</span>
            </div>
            <div class="legend-item">
                <span class="legend-symbol">‚óÜ‚îÄ‚îÄ</span>
                <span><strong>Composi√ß√£o:</strong> Rela√ß√£o parte-todo (destrui√ß√£o conjunta)</span>
            </div>
            <div class="legend-item">
                <span class="legend-symbol">‚óá‚îÄ‚îÄ</span>
                <span><strong>Agrega√ß√£o:</strong> Rela√ß√£o tem-um (exist√™ncia independente)</span>
            </div>
            <div class="legend-item">
                <span class="legend-symbol">‚ãØ‚ñ∂</span>
                <span><strong>Depend√™ncia:</strong> Classe usa outra temporariamente</span>
            </div>

            <h3 style="margin-top: 25px;">üéØ Padr√µes de Projeto Aplicados</h3>
            <div class="legend-item">
                <span class="legend-symbol">1.</span>
                <span><strong>Facade Pattern:</strong> ModuloCompras simplifica acesso aos subsistemas</span>
            </div>
            <div class="legend-item">
                <span class="legend-symbol">2.</span>
                <span><strong>Mock Object Pattern:</strong> EstoqueMock, ProducaoMock, FinanceiroMock simulam m√≥dulos</span>
            </div>
            <div class="legend-item">
                <span class="legend-symbol">3.</span>
                <span><strong>Template Method:</strong> ListaGenerica&lt;T&gt; fornece estrutura reutiliz√°vel</span>
            </div>

            <h3 style="margin-top: 25px;">üèóÔ∏è Conceitos de POO</h3>
            <div class="legend-item">
                <span class="legend-symbol">üîí</span>
                <span><strong>Encapsulamento:</strong> Atributos privados, acesso via m√©todos p√∫blicos</span>
            </div>
            <div class="legend-item">
                <span class="legend-symbol">üß¨</span>
                <span><strong>Heran√ßa:</strong> Pessoa ‚Üí Fornecedor (reutiliza√ß√£o de c√≥digo)</span>
            </div>
            <div class="legend-item">
                <span class="legend-symbol">üîÑ</span>
                <span><strong>Polimorfismo:</strong> Interfaces com m√∫ltiplas implementa√ß√µes</span>
            </div>
            <div class="legend-item">
                <span class="legend-symbol">üì¶</span>
                <span><strong>Abstra√ß√£o:</strong> Classes abstratas e interfaces ocultam complexidade</span>
            </div>
        </div>

        <div class="info-box" style="margin-top: 30px;">
            <strong>üí° Dica:</strong> Use Ctrl+F (ou Cmd+F no Mac) para buscar classes espec√≠ficas neste diagrama.
            Para melhor visualiza√ß√£o, utilize o zoom do navegador ou imprima em orienta√ß√£o paisagem.
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#fff',
                primaryTextColor: '#000',
                primaryBorderColor: '#333',
                lineColor: '#333',
                secondaryColor: '#f4f4f4',
                tertiaryColor: '#e8e8e8'
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
</body>
</html>
